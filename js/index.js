const form=document.getElementById("form"),address=document.getElementById("address"),locatio=document.getElementById("location"),cityHeader=document.getElementById("city-header"),tempHeader=document.getElementById("temp-data"),skyHeader=document.getElementById("sky-data"),pressureHeader=document.getElementById("pressure-data"),weatherImage=document.getElementById("weather-image"),humidity=document.getElementById("humidity"),iframe=document.getElementById("iframe"),share=document.getElementById("share"),useLocation=document.getElementById("use-location");let temperature="Celsius";const menu=document.getElementById("dot-menu"),changeTemp=document.getElementById("change-temp-calc"),pop=document.getElementById("popup"),modeToggle=document.getElementById("mode-toggle"),lightThemes=document.querySelectorAll(".light"),lighterThemes=document.querySelectorAll(".light-secondary");modeToggle.checked=!1;const textlightThemes=document.querySelectorAll(".text-light"),textlighterThemes=document.querySelectorAll(".text-light-secondary"),bglightThemes=document.querySelectorAll(".bg-light"),bglighterThemes=document.querySelectorAll(".bg-light-secondary"),currentHour=(new Date).getHours();let lat,lon;modeToggle.onchange=()=>{const e=document.querySelectorAll(".dark"),t=document.querySelectorAll(".dark-secondary"),r=document.querySelectorAll(".text-dark"),a=document.querySelectorAll(".text-dark-secondary"),s=document.querySelectorAll(".bg-dark"),c=document.querySelectorAll(".bg-dark-secondary");switch(modeToggle.checked){case!0:lightThemes.forEach(e=>{e.classList.replace("light","dark")}),lighterThemes.forEach(e=>{e.classList.replace("light-secondary","dark-secondary")}),textlightThemes.forEach(e=>{e.classList.replace("text-light","text-dark")}),textlighterThemes.forEach(e=>{e.classList.replace("text-light-secondary","text-dark-secondary")}),bglightThemes.forEach(e=>{e.classList.replace("bg-light","bg-dark")}),bglighterThemes.forEach(e=>{e.classList.replace("bg-light-secondary","bg-dark-secondary")});break;case!1:e.forEach(e=>{e.classList.replace("dark","light")}),t.forEach(e=>{e.classList.replace("dark-secondary","light-secondary")}),r.forEach(e=>{e.classList.replace("text-dark","text-light")}),a.forEach(e=>{e.classList.replace("text-dark-secondary","text-light-secondary")}),s.forEach(e=>{e.classList.replace("bg-dark","bg-light")}),c.forEach(e=>{e.classList.replace("bg-dark-secondary","bg-light-secondary")});break;default:break}},menu.onclick=()=>{changeTemp.innerText="Celsius"===temperature?"Change to Celcius.":"Change to Fahrenheit.",pop.style.zIndex=1},pop.onclick=()=>{pop.style.zIndex=-1},changeTemp.onclick=()=>{tempHeader.innerText="Celsius"===temperature?Math.round(9*parseInt(tempHeader.innerText)/5+32)+"째":Math.round(5*(parseInt(tempHeader.innerText)-32)/9)+"째",changeTemp.innerText="Celsius"===temperature?"Change to Celcius.":"Change to Fahrenheit.",temperature="Celsius"===temperature?"Fahrenheit":"Celsius"},form.addEventListener("submit",e=>{if(e.preventDefault(),address.value&&locatio.value){const e=`${address.value.trim()},${locatio.value.trim()}`.replace(/ +/g,"+"),t=e.replace(/\+/g,"%2B").replace(/,/g,"%2C"),r=locatio.value.trim().replace(/ +[, ]+|[, ]+/g," ").split(" ")[0];fetch(`https://api.openweathermap.org/data/2.5/weather?q=${r}&appid=628904fcbcc368d6b240913148864136`).then(e=>e.json()).then(e=>{const t=parseInt(e.main.temp-273.15),r="Celsius"===temperature?t:Math.round(9*t/5+32);menu.innerHTML="&vellip;",cityHeader.innerText=`${e.name}, ${e.sys.country}`,tempHeader.innerText=r+"째",skyHeader.innerText=e.weather[0].description,weatherImage.setAttribute("src",`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`),humidity.innerHTML=e.main.humidity+"<span>m<sup>3</sup></span>",pressureHeader.innerText=e.main.pressure+" Pa",locatio.value="",address.value=""}),iframe.setAttribute("src","https://www.google.com/maps/embed/v1/place?key=AIzaSyBby-Z83HvfSVAaAGGRwrV5O9AM83QBUcI&q="+e),share.setAttribute("src",`https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3D${t}&layout=button&size=large&width=77&height=28&appId`)}}),useLocation.onclick=()=>{navigator.geolocation.getCurrentPosition(e=>{lat=e.coords.latitude,lon=e.coords.longitude;const t=`${lat},${lon}`.replace(/ +/g,"+"),r=t.replace(/\+/g,"%2B").replace(/,/g,"%2C");lat&&lon&&(fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=628904fcbcc368d6b240913148864136`).then(e=>e.json()).then((function(e){const t=parseInt(e.main.temp-273.15),r="Celsius"===temperature?t:Math.round(9*t/5+32);menu.innerHTML="&vellip;",cityHeader.innerText=`${e.name}, ${e.sys.country}`,tempHeader.innerText=r+"째",skyHeader.innerText=e.weather[0].description,weatherImage.setAttribute("src",`https://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`),humidity.innerHTML=e.main.humidity+"<span>m<sup>3</sup></span>",pressureHeader.innerText=e.main.pressure+" Pa",locatio.value="",address.value=""})),iframe.setAttribute("src","https://www.google.com/maps/embed/v1/place?key=AIzaSyBby-Z83HvfSVAaAGGRwrV5O9AM83QBUcI&q="+t),share.setAttribute("src",`https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2F%3Fapi%3D1%26query%3D${r}&layout=button&size=large&width=77&height=28&appId`))})},(currentHour>18||currentHour<7)&&(modeToggle.checked=!0,lightThemes.forEach(e=>{e.classList.replace("light","dark")}),lighterThemes.forEach(e=>{e.classList.replace("light-secondary","dark-secondary")}),textlightThemes.forEach(e=>{e.classList.replace("text-light","text-dark")}),textlighterThemes.forEach(e=>{e.classList.replace("text-light-secondary","text-dark-secondary")}),bglightThemes.forEach(e=>{e.classList.replace("bg-light","bg-dark")}),bglighterThemes.forEach(e=>{e.classList.replace("bg-light-secondary","bg-dark-secondary")}));